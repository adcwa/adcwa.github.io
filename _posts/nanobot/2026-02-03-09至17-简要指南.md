# å‰©ä½™ç« èŠ‚ç®€è¦æŒ‡å—

> ğŸš§ ä»¥ä¸‹æ˜¯å‰©ä½™ç« èŠ‚çš„ç®€è¦è¯´æ˜ã€‚å®Œæ•´ç‰ˆæœ¬å°†åœ¨åç»­æ›´æ–°ä¸­æ·»åŠ ã€‚

## 09 - å†…ç½®å·¥å…·è¯¦è§£

è¯¦ç»†ä»‹ç»æ¯ä¸ªå†…ç½®å·¥å…·çš„åŠŸèƒ½ã€å‚æ•°å’Œä½¿ç”¨ç¤ºä¾‹ï¼š

- **ReadFileTool** - è¯»å–æ–‡ä»¶å†…å®¹
- **WriteFileTool** - å†™å…¥æ–‡ä»¶
- **EditFileTool** - ç¼–è¾‘æ–‡ä»¶æŒ‡å®šè¡Œ
- **ListDirTool** - åˆ—å‡ºç›®å½•å†…å®¹
- **ExecTool** - æ‰§è¡Œ Shell å‘½ä»¤
- **WebSearchTool** - Web æœç´¢ï¼ˆBrave APIï¼‰
- **WebFetchTool** - æŠ“å–ç½‘é¡µå†…å®¹
- **MessageTool** - å‘é€æ¶ˆæ¯åˆ°æ¸ é“
- **SpawnTool** - ç”Ÿæˆå­ä»£ç†

å‚è€ƒ [08-å·¥å…·ç³»ç»Ÿæ¶æ„.md](./nanobot/2026-02-03/08-å·¥å…·ç³»ç»Ÿæ¶æ„.md) äº†è§£å·¥å…·çš„åŸºæœ¬æ¦‚å¿µã€‚

## 10 - æŠ€èƒ½ç³»ç»Ÿ

**æ ¸å¿ƒæ¦‚å¿µ**ï¼š
- æŠ€èƒ½æ˜¯ Markdown æ–‡æ¡£ï¼ˆ`SKILL.md`ï¼‰+ å¯é€‰è„šæœ¬
- Agent é€šè¿‡ `read_file` å·¥å…·è¯»å–æŠ€èƒ½æ–‡æ¡£
- æŠ€èƒ½æ¯”å·¥å…·æ›´çµæ´»ï¼Œé€‚åˆéœ€è¦ä¸Šä¸‹æ–‡ç†è§£çš„ä»»åŠ¡

**æŠ€èƒ½ç›®å½•ç»“æ„**ï¼š
```
~/.nanobot/skills/my-skill/
â”œâ”€â”€ SKILL.md          # æŠ€èƒ½å®šä¹‰
â”œâ”€â”€ script.py         # å¯é€‰è„šæœ¬
â””â”€â”€ resources/        # å¯é€‰èµ„æº
```

**SKILL.md æ ¼å¼**ï¼š
```markdown
---
name: my-skill
description: ç®€çŸ­æè¿°
available: true
---

# my-skill

å®Œæ•´çš„ä½¿ç”¨è¯´æ˜...
```

**é¢„ç½®æŠ€èƒ½**ï¼š
- `github` - GitHub ä»“åº“æ“ä½œ
- `weather` - å¤©æ°”æŸ¥è¯¢
- `tmux` - Tmux ä¼šè¯ç®¡ç†
- `summarize` - å†…å®¹æ‘˜è¦
- `skill-creator` - åˆ›å»ºæ–°æŠ€èƒ½çš„åŠ©æ‰‹

## 11 - å­ä»£ç†ç³»ç»Ÿ

**ç”¨é€”**ï¼šå¤„ç†åå°é•¿æ—¶é—´ä»»åŠ¡

**æ ¸å¿ƒç±»**ï¼š`SubagentManager`

**å·¥ä½œåŸç†**ï¼š
1. ä¸» Agent è°ƒç”¨ `spawn` å·¥å…·
2. SubagentManager åˆ›å»ºç‹¬ç«‹çš„ AgentLoop å®ä¾‹
3. å­ä»£ç†åœ¨åå°è¿è¡Œï¼ˆ`asyncio.create_task`ï¼‰
4. å®Œæˆåé€šè¿‡æ¶ˆæ¯æ€»çº¿é€šçŸ¥åŸå§‹å¯¹è¯

**ä½¿ç”¨ç¤ºä¾‹**ï¼š
```python
# Agent è°ƒç”¨
spawn(task="æ¯å°æ—¶æ£€æŸ¥ç½‘ç«™çŠ¶æ€", announce=True)

# å­ä»£ç†åœ¨åå°è¿è¡Œ
# å‘ç°é—®é¢˜æ—¶è‡ªåŠ¨é€šçŸ¥ç”¨æˆ·
```

## 12 - è®°å¿†ç³»ç»Ÿ

**æ ¸å¿ƒç±»**ï¼š`MemoryStore`

**æ–‡ä»¶ç»“æ„**ï¼š
```
~/.nanobot/memory/
â”œâ”€â”€ MEMORY.md         # é•¿æœŸè®°å¿†
â””â”€â”€ 2026-02-03.md     # æ¯æ—¥ç¬”è®°
```

**è‡ªåŠ¨é›†æˆ**ï¼š
- ContextBuilder è‡ªåŠ¨åŠ è½½ MEMORY.md
- Agent å¯ä»¥é€šè¿‡å·¥å…·è¯»å†™è®°å¿†æ–‡ä»¶

**ä½¿ç”¨æ¨¡å¼**ï¼š
```python
# Agent é€šè¿‡å·¥å…·å†™å…¥è®°å¿†
write_file(
    path="~/.nanobot/memory/MEMORY.md",
    content="ç”¨æˆ·å–œæ¬¢ä½¿ç”¨ Python..."
)
```

## 13 - æ¸ é“ç®¡ç†

**æ ¸å¿ƒç±»**ï¼š`ChannelManager`

**æ”¯æŒçš„æ¸ é“**ï¼š
- **Telegram** - åŸºäº `python-telegram-bot`
- **WhatsApp** - é€šè¿‡ Node.js æ¡¥æ¥

**æ¸ é“æ¥å£**ï¼š
```python
class Channel(ABC):
    @abstractmethod
    async def start(self):
        """å¯åŠ¨æ¸ é“ç›‘å¬"""
        pass
    
    @abstractmethod
    async def send_message(self, msg: OutboundMessage):
        """å‘é€æ¶ˆæ¯"""
        pass
```

**é…ç½®ç¤ºä¾‹**ï¼š
```json
{
  "channels": {
    "telegram": {
      "enabled": true,
      "token": "YOUR_BOT_TOKEN",
      "allowFrom": ["USER_ID"]
    }
  }
}
```

## 14 - å®šæ—¶ä»»åŠ¡

**æ ¸å¿ƒç±»**ï¼š`CronService`

**æ”¯æŒä¸¤ç§æ–¹å¼**ï¼š
1. **Cron è¡¨è¾¾å¼** - `"0 9 * * *"` (æ¯å¤© 9 ç‚¹)
2. **é—´éš”ç§’æ•°** - `3600` (æ¯å°æ—¶)

**ä»»åŠ¡æ¨¡å‹**ï¼š
```python
class CronJob(BaseModel):
    id: str
    name: str
    message: str
    cron_expr: str | None
    interval_seconds: int | None
    enabled: bool
    channel: str | None
    to: str | None
```

**æ‰§è¡Œæ–¹å¼**ï¼š
- å®šæ—¶ä»»åŠ¡é€šè¿‡æ¶ˆæ¯æ€»çº¿å‘é€åˆ° Agent
- Agent å¤„ç†åå¯ä»¥å‘é€åˆ°æŒ‡å®šæ¸ é“

## 15 - å¿ƒè·³æœºåˆ¶

**æ ¸å¿ƒç±»**ï¼š`HeartbeatService`

**ç”¨é€”**ï¼šä¸»åŠ¨å”¤é†’ Agentï¼Œæ‰§è¡Œå‘¨æœŸæ€§ä»»åŠ¡

**ç¤ºä¾‹åœºæ™¯**ï¼š
- æ—©ä¸Šä¸»åŠ¨é—®å€™ç”¨æˆ·
- å®šæœŸæ£€æŸ¥ä»»åŠ¡å®Œæˆæƒ…å†µ
- æé†’ç”¨æˆ·æœªå®Œæˆçš„äº‹é¡¹

**å®ç°**ï¼šç±»ä¼¼ Cronï¼Œä½†æ›´è½»é‡çº§

## 16 - å¼€å‘è‡ªå®šä¹‰å·¥å…·

**æ­¥éª¤**ï¼š

1. **ç»§æ‰¿ Tool åŸºç±»**ï¼š
```python
from nanobot.agent.tools.base import Tool

class MyTool(Tool):
    @property
    def name(self) -> str:
        return "my_tool"
    
    @property
    def description(self) -> str:
        return "å·¥å…·æè¿°"
    
    @property
    def parameters(self) -> dict:
        return {
            "type": "object",
            "properties": {
                "arg": {"type": "string"}
            },
            "required": ["arg"]
        }
    
    async def execute(self, arg: str) -> str:
        return f"å¤„ç†: {arg}"
```

2. **æ³¨å†Œå·¥å…·**ï¼š
```python
agent.tools.register(MyTool())
```

è¯¦ç»†ç¤ºä¾‹å‚è€ƒ [08-å·¥å…·ç³»ç»Ÿæ¶æ„.md](./nanobot/2026-02-03/08-å·¥å…·ç³»ç»Ÿæ¶æ„.md)

## 17 - å¼€å‘è‡ªå®šä¹‰æŠ€èƒ½

**æ­¥éª¤**ï¼š

1. **åˆ›å»ºæŠ€èƒ½ç›®å½•**ï¼š
```bash
mkdir -p ~/.nanobot/skills/my-skill
```

2. **ç¼–å†™ SKILL.md**ï¼š
```markdown
---
name: my-skill
description: æˆ‘çš„è‡ªå®šä¹‰æŠ€èƒ½
available: true
---

# my-skill

è¿™ä¸ªæŠ€èƒ½ç”¨äº...

## ä½¿ç”¨æ–¹æ³•

\```bash
python ~/.nanobot/skills/my-skill/script.py
\```
```

3. **å¯é€‰ï¼šæ·»åŠ è„šæœ¬**ï¼š
```python
#!/usr/bin/env python3
import sys

def main():
    # æŠ€èƒ½é€»è¾‘
    print("ç»“æœ")

if __name__ == "__main__":
    main()
```

Agent ä¼šè‡ªåŠ¨å‘ç°æ–°æŠ€èƒ½å¹¶åœ¨ç³»ç»Ÿæç¤ºä¸­æ˜¾ç¤ºã€‚

---

## å®Œæ•´æ–‡æ¡£è®¡åˆ’

è¿™äº›ç« èŠ‚çš„å®Œæ•´ç‰ˆæœ¬å°†åŒ…å«ï¼š
- è¯¦ç»†çš„ä»£ç ç¤ºä¾‹
- æ¶æ„å›¾å’Œæµç¨‹å›¾
- æœ€ä½³å®è·µ
- å¸¸è§é—®é¢˜è§£ç­”

å½“å‰å¯å‚è€ƒå·²æœ‰çš„è¯¦ç»†æ–‡æ¡£ï¼š
- [01-é¡¹ç›®ç»“æ„ä¸æ¶æ„.md](./nanobot/2026-02-03/01-é¡¹ç›®ç»“æ„ä¸æ¶æ„.md)
- [05-Agentæ ¸å¿ƒå¾ªç¯.md](./nanobot/2026-02-03/05-Agentæ ¸å¿ƒå¾ªç¯.md)
- [08-å·¥å…·ç³»ç»Ÿæ¶æ„.md](./nanobot/2026-02-03/08-å·¥å…·ç³»ç»Ÿæ¶æ„.md)
- [18-ä»£ç å¯¹æ¯”åˆ†æ.md](./nanobot/2026-02-03/18-ä»£ç å¯¹æ¯”åˆ†æ.md)
- [å¿«é€Ÿå‚è€ƒæ‰‹å†Œ.md](./nanobot/2026-02-03/å¿«é€Ÿå‚è€ƒæ‰‹å†Œ.md)

ä»¥åŠæºä»£ç æœ¬èº«ï¼ˆ~4,700 è¡Œï¼Œæ˜“äºé˜…è¯»ï¼‰ã€‚
